{
  "_content": {},
  "aliases": [],
  "arbitrary": [
    {
      "children": [],
      "title": "CPU build options"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "The following options are mainly used to change the default behavior of optimizations that target certain CPU features:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "children": [
                        {
                          "dd": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": "Default value is "
                                    },
                                    "type": "Words"
                                  },
                                  {
                                    "data": {
                                      "value": [
                                        "min"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": " which provides the minimum CPU features that can    safely run on a wide range of platforms within the processor family."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            },
                            {
                              "data": {
                                "children": [
                                  {
                                    "inline": [
                                      {
                                        "data": {
                                          "value": "During the runtime, NumPy modules will fail to load if any of specified features are not supported by the target CPU ( raises Python runtime error). "
                                        },
                                        "type": "Words"
                                      }
                                    ],
                                    "inner": []
                                  }
                                ],
                                "kind": "note",
                                "title": ""
                              },
                              "type": "Admonition"
                            }
                          ],
                          "dt": {
                            "inline": [
                              {
                                "data": {
                                  "value": [
                                    "--cpu-baseline"
                                  ]
                                },
                                "type": "Verbatim"
                              },
                              {
                                "data": {
                                  "value": ": minimal set of required CPU features."
                                },
                                "type": "Words"
                              }
                            ],
                            "inner": []
                          }
                        }
                      ]
                    },
                    "type": "DefList"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "children": [
                        {
                          "dd": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": "Default value is "
                                    },
                                    "type": "Words"
                                  },
                                  {
                                    "data": {
                                      "value": [
                                        "max -xop -fma4"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": " which enables all CPU    features, except for AMD legacy features (in case of X86)."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            },
                            {
                              "data": {
                                "children": [
                                  {
                                    "inline": [
                                      {
                                        "data": {
                                          "value": "During the runtime, NumPy modules will skip any specified features that are not available in the target CPU. "
                                        },
                                        "type": "Words"
                                      }
                                    ],
                                    "inner": []
                                  }
                                ],
                                "kind": "note",
                                "title": ""
                              },
                              "type": "Admonition"
                            }
                          ],
                          "dt": {
                            "inline": [
                              {
                                "data": {
                                  "value": [
                                    "--cpu-dispatch"
                                  ]
                                },
                                "type": "Verbatim"
                              },
                              {
                                "data": {
                                  "value": ": dispatched set of additional CPU features."
                                },
                                "type": "Words"
                              }
                            ],
                            "inner": []
                          }
                        }
                      ]
                    },
                    "type": "DefList"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "These options are accessible through "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "distutils"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " commands "
                },
                "type": "Words"
              },
              {
                "data": {
                  "exists": true,
                  "kind": "module",
                  "reference": {
                    "kind": "api",
                    "module": "distutils",
                    "path": "distutils.command.build",
                    "version": "*"
                  },
                  "value": "distutils.command.build"
                },
                "type": "Link"
              },
              {
                "data": {
                  "value": ", "
                },
                "type": "Words"
              },
              {
                "data": {
                  "exists": true,
                  "kind": "module",
                  "reference": {
                    "kind": "api",
                    "module": "distutils",
                    "path": "distutils.command.build_clib",
                    "version": "*"
                  },
                  "value": "distutils.command.build_clib"
                },
                "type": "Link"
              },
              {
                "data": {
                  "value": " and "
                },
                "type": "Words"
              },
              {
                "data": {
                  "exists": true,
                  "kind": "module",
                  "reference": {
                    "kind": "api",
                    "module": "distutils",
                    "path": "distutils.command.build_ext",
                    "version": "*"
                  },
                  "value": "distutils.command.build_ext"
                },
                "type": "Link"
              },
              {
                "data": {
                  "value": ". They accept a set of "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "CPU features <opt-supported-features>"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " or groups of features that gather several features or "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "special options <opt-special-options>"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " that perform a series of procedures."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "If ``build_clib`` or ``build_ext`` are not specified by the user, the arguments of ``build`` will be used instead, which also holds the default values. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "To customize both "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_ext"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " and "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_clib"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "cd /path/to/numpy\npython setup.py build --cpu-baseline=\"avx2 fma3\" install --user"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "To customize only "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_ext"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "cd /path/to/numpy\npython setup.py build_ext --cpu-baseline=\"avx2 fma3\" install --user"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "To customize only "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_clib"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "cd /path/to/numpy\npython setup.py build_clib --cpu-baseline=\"avx2 fma3\" install --user"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "You can also customize CPU/build options through PIP command::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "pip install --no-use-pep517 --global-option=build \\\n--global-option=\"--cpu-baseline=avx2 fma3\" \\\n--global-option=\"--cpu-dispatch=max\" ./"
          },
          "type": "BlockVerbatim"
        }
      ],
      "title": "Description"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "In general, the default settings tend to not impose certain CPU features that may not be available on some older processors. Raising the ceiling of the baseline features will often improve performance and may also reduce binary size."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "The following are the most common scenarios that may require changing the default settings:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        }
      ],
      "title": "Quick Start"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "And I do not intend to export the build to other users or target a different CPU than what the host has."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Set "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "native"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " for baseline, or manually specify the CPU features in case of option "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "native"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " isn't supported by your platform::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "python setup.py build --cpu-baseline=\"native\" bdist"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Building NumPy with extra CPU features isn't necessary for this case, since all supported features are already defined within the baseline features::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "python setup.py build --cpu-baseline=native --cpu-dispatch=none bdist"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "A fatal error will be raised if `native` isn ' t supported by the host platform. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        }
      ],
      "title": "I am building NumPy for my local use"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Since most of the CPUs nowadays support at least "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "AVX"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": ", "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "F16C"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " features, you can use::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "python setup.py build --cpu-baseline=\"avx f16c\" bdist"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "`` - - cpu - baseline`` force combine all implied features, so there ' s no need to add SSE features. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        }
      ],
      "title": "I do not want to support the old processors of the `x86` architecture"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Then raise the ceiling of the baseline features to Power8::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "python setup.py build --cpu-baseline=\"vsx2\" bdist"
          },
          "type": "BlockVerbatim"
        }
      ],
      "title": "I'm facing the same case above but with `ppc64` architecture"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "You may have some reservations about including of "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "AVX512"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " or any other CPU feature and you want to exclude from the dispatched features::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "python setup.py build --cpu-dispatch=\"max -avx512f -avx512cd \\\n-avx512_knl -avx512_knm -avx512_skx -avx512_clx -avx512_cnl -avx512_icl\" \\\nbdist"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _opt-supported-features:"
          },
          "type": "Unimplemented"
        }
      ],
      "title": "Having issues with `AVX512` features?"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "The names of the features can express one feature or a group of features, as shown in the following tables supported depend on the lowest interest:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "The following features may not be supported by all compilers, also some compilers may produce different set of implied features when it comes to features like ``AVX512``, ``AVX2``, and ``FMA3``. See : ref : `opt - platform - differences` for more details. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "args0": [],
            "directive_name": "include",
            "inner": {
              "inline": [
                {
                  "data": {
                    "value": "generated_tables / cpu_features.inc "
                  },
                  "type": "Words"
                }
              ],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _opt-special-options:"
          },
          "type": "Unimplemented"
        }
      ],
      "title": "Supported Features"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "NONE"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": enable no features."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "NATIVE"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": Enables all CPU features that supported by the host CPU,   this operation is based on the compiler flags ("
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "-march=native"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "-xHost"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "/QxHost"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ")"
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "MIN"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": Enables the minimum CPU features that can safely run on a wide range of platforms:"
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "args0": [
                        ":align: left"
                      ],
                      "directive_name": "table",
                      "inner": {
                        "inline": [
                          {
                            "data": {
                              "value": "====================================== ======================================= For Arch Implies ====================================== ======================================= x86 ( 32 - bit mode) ``SSE`` ``SSE2`` x86_64 ``SSE`` ``SSE2`` ``SSE3`` IBM / POWER ( big - endian mode) ``NONE`` IBM / POWER ( little - endian mode) ``VSX`` ``VSX2`` ARMHF ``NONE`` ARM64 A.K. AARCH64 ``NEON`` ``NEON_FP16`` ``NEON_VFPV4`` ``ASIMD`` IBM / ZSYSTEM ( S390X) ``NONE`` ====================================== ======================================= "
                            },
                            "type": "Words"
                          }
                        ],
                        "inner": []
                      }
                    },
                    "type": "BlockDirective"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "MAX"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": Enables all supported CPU features by the compiler and platform."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Operators-/+"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": remove or add features, useful with options "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "MAX"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "MIN"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " and "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "NATIVE"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": "."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        }
      ],
      "title": "Special Options"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "CPU features and other options are case-insensitive, for example::      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "python setup.py build --cpu-dispatch=\"SSE41 avx2 FMA3\""
                    },
                    "type": "BlockVerbatim"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "The order of the requested optimizations doesn't matter::      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "python setup.py build --cpu-dispatch=\"SSE41 AVX2 FMA3\"\n# equivalent to\npython setup.py build --cpu-dispatch=\"FMA3 AVX2 SSE41\""
                    },
                    "type": "BlockVerbatim"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "Either commas or spaces or '+' can be used as a separator,   for example::      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "python setup.py build --cpu-dispatch=\"avx2 avx512f\"\n# or\npython setup.py build --cpu-dispatch=avx2,avx512f\n# or\npython setup.py build --cpu-dispatch=\"avx2+avx512f\""
                    },
                    "type": "BlockVerbatim"
                  },
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "all works but arguments should be enclosed in quotes or escaped   by backslash if any spaces are used."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "--cpu-baseline"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " combines all implied CPU features, for example::      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "python setup.py build --cpu-baseline=sse42\n# equivalent to\npython setup.py build --cpu-baseline=\"sse sse2 sse3 ssse3 sse41 popcnt sse42\""
                    },
                    "type": "BlockVerbatim"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "--cpu-baseline"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " will be treated as \"native\" if compiler native flag   "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "-march=native"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " or "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "-xHost"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " or "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "/QxHost"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " is enabled through environment variable   "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "domain": null,
                            "role": null,
                            "value": "CFLAGS"
                          },
                          "type": "Directive"
                        },
                        {
                          "data": {
                            "value": "      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "export CFLAGS=\"-march=native\"\npython setup.py install --user\n# is equivalent to\npython setup.py build --cpu-baseline=native install --user"
                    },
                    "type": "BlockVerbatim"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "--cpu-baseline"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " escapes any specified features that aren't supported   by the target platform or compiler rather than raising fatal errors."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": [
                        ".. note::",
                        "",
                        "     Since ``--cpu-baseline`` combines all implied features, the maximum",
                        "     supported of implied features will be enabled rather than escape all of them.",
                        "     For example::",
                        "",
                        "        # Requesting `AVX2,FMA3` but the compiler only support **SSE** features",
                        "        python setup.py build --cpu-baseline=\"avx2 fma3\"",
                        "        # is equivalent to",
                        "        python setup.py build --cpu-baseline=\"sse sse2 sse3 ssse3 sse41 popcnt sse42\""
                      ]
                    },
                    "type": "BlockQuote"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "--cpu-dispatch"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " does not combain any of implied CPU features,   so you must add them unless you want to disable one or all of them::      "
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "value": "# Only dispatches AVX2 and FMA3\npython setup.py build --cpu-dispatch=avx2,fma3\n# Dispatches AVX and SSE features\npython setup.py build --cpu-baseline=ssse3,sse41,sse42,avx,avx2,fma3"
                    },
                    "type": "BlockVerbatim"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "--cpu-dispatch"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " escapes any specified baseline features and also escapes   any features not supported by the target platform or compiler without raising   fatal errors."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Eventually, you should always check the final report through the build log to verify the enabled features. See "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "opt-build-report"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " for more details."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _opt-platform-differences:"
          },
          "type": "Unimplemented"
        }
      ],
      "title": "Behaviors"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Some exceptional conditions force us to link some features together when it come to certain compilers or architectures, resulting in the impossibility of building them separately."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "These conditions can be divided into two parts, as follows:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "content": {
                    "value": "Architectural compatibility"
                  }
                },
                "type": "Strong"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "The need to align certain CPU features that are assured to be supported by successive generations of the same architecture, some cases:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "On ppc64le "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "VSX(ISA 2.06)"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " and "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "VSX2(ISA 2.07)"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " both imply one another since the   first generation that supports little-endian mode is Power-8`(ISA 2.07)`"
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": "On AArch64 "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "NEON NEON_FP16 NEON_VFPV4 ASIMD"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " implies each other since they are part of the   hardware baseline."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "For example::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "# On ARMv8/A64, specify NEON is going to enable Advanced SIMD\n# and all predecessor extensions\npython setup.py build --cpu-baseline=neon\n# which equivalent to\npython setup.py build --cpu-baseline=\"neon neon_fp16 neon_vfpv4 asimd\""
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "Please take a deep look at : ref : `opt - supported - features`, in order to determine the features that imply one another. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "content": {
                    "value": "Compilation compatibility"
                  }
                },
                "type": "Strong"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "Some compilers don't provide independent support for all CPU features. For instance "
                },
                "type": "Words"
              },
              {
                "data": {
                  "content": {
                    "value": "Intel"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": "'s compiler doesn't provide separated flags for "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "AVX2"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " and "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "FMA3"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": ", it makes sense since all Intel CPUs that comes with "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "AVX2"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " also support "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "FMA3"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": ", but this approach is incompatible with other "
                },
                "type": "Words"
              },
              {
                "data": {
                  "content": {
                    "value": "x86"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": " CPUs from "
                },
                "type": "Words"
              },
              {
                "data": {
                  "content": {
                    "value": "AMD"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": " or "
                },
                "type": "Words"
              },
              {
                "data": {
                  "content": {
                    "value": "VIA"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "For example::      "
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "# Specify AVX2 will force enables FMA3 on Intel compilers\npython setup.py build --cpu-baseline=avx2\n# which equivalent to\npython setup.py build --cpu-baseline=\"avx2 fma3\""
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "The following tables only show the differences imposed by some compilers from the general context that been shown in the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "opt-supported-features"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " tables:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "inline": [
                  {
                    "data": {
                      "value": "Features names with strikeout represent the unsupported CPU features. "
                    },
                    "type": "Words"
                  }
                ],
                "inner": []
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "args0": [
              "html"
            ],
            "directive_name": "raw",
            "inner": {
              "inline": [
                {
                  "data": {
                    "value": "< style> .enabled - feature { color : green; font - weight : bold;} .disabled - feature { color : red; text - decoration : line - through;} < / style> "
                  },
                  "type": "Words"
                }
              ],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "args0": [
              "enabled"
            ],
            "directive_name": "role",
            "inner": {
              "inline": [],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "args0": [
              "disabled"
            ],
            "directive_name": "role",
            "inner": {
              "inline": [],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "args0": [],
            "directive_name": "include",
            "inner": {
              "inline": [
                {
                  "data": {
                    "value": "generated_tables / compilers - diff.inc "
                  },
                  "type": "Words"
                }
              ],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _opt-build-report:"
          },
          "type": "Unimplemented"
        }
      ],
      "title": "Platform differences"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "In most cases, the CPU build options do not produce any fatal errors that lead to hanging the build. Most of the errors that may appear in the build log serve as heavy warnings due to the lack of some expected CPU features by the compiler."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "So we strongly recommend checking the final report log, to be aware of what kind of CPU features are enabled and what are not."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "You can find the final report of CPU optimizations at the end of the build log, and here is how it looks on x86_64/gcc:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "args0": [
              "html"
            ],
            "directive_name": "raw",
            "inner": {
              "inline": [
                {
                  "data": {
                    "value": "< style>#build - report .highlight - bash pre { max - height : 450px; overflow - y : scroll;} < / style> "
                  },
                  "type": "Words"
                }
              ],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "args0": [
              "log_example.txt"
            ],
            "directive_name": "literalinclude",
            "inner": {
              "inline": [],
              "inner": []
            }
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "As you see, there is a separate report for each of "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_ext"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " and "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "build_clib"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " that includes several sections, and each section has several values, representing the following:"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "content": {
                    "value": "Platform"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": ":"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Architecture"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The architecture name of target CPU. It should be one of   "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "x86"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "x64"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "ppc64"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "ppc64le"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "armhf"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "aarch64"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ", "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "s390x"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " or "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "unknown"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": "."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Compiler"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The compiler name. It should be one of   gcc, clang, msvc, icc, iccw or unix-like."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "content": {
                    "value": "CPU baseline"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": ":"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Requested"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The specific features and options to "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "--cpu-baseline"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " as-is."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Enabled"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The final set of enabled CPU features."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Flags"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The compiler flags that were used to all NumPy "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "domain": null,
                            "role": null,
                            "value": "C/C++"
                          },
                          "type": "Directive"
                        },
                        {
                          "data": {
                            "value": " sources   during the compilation except for temporary sources that have been used for generating   the binary objects of dispatched features."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Extra checks"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": list of internal checks that activate certain functionality   or intrinsics related to the enabled features, useful for debugging when it comes   to developing SIMD kernels."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        },
        {
          "data": {
            "inline": [
              {
                "data": {
                  "content": {
                    "value": "CPU dispatch"
                  }
                },
                "type": "Strong"
              },
              {
                "data": {
                  "value": ":"
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Requested"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The specific features and options to "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "--cpu-dispatch"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " as-is."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Enabled"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": The final set of enabled CPU features."
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "value": [
                  {
                    "data": {
                      "inline": [
                        {
                          "data": {
                            "value": [
                              "Generated"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": ": At the beginning of the next row of this property,   the features for which optimizations have been generated are shown in the   form of several sections with similar properties explained as follows:"
                          },
                          "type": "Words"
                        }
                      ],
                      "inner": []
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "children": [
                        {
                          "value": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": [
                                        "One or multiple dispatched feature"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": ": The implied CPU features."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            }
                          ]
                        },
                        {
                          "value": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": [
                                        "Flags"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": ": The compiler flags that been used for these features."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            }
                          ]
                        },
                        {
                          "value": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": [
                                        "Extra checks"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": ": Similar to the baseline but for these dispatched features."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            }
                          ]
                        },
                        {
                          "value": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": [
                                        "Detect"
                                      ]
                                    },
                                    "type": "Verbatim"
                                  },
                                  {
                                    "data": {
                                      "value": ": Set of CPU features that need be detected in runtime in order to     execute the generated optimizations."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            }
                          ]
                        },
                        {
                          "value": [
                            {
                              "data": {
                                "inline": [
                                  {
                                    "data": {
                                      "value": "The lines that come after the above property and end with a ':' on a separate line,     represent the paths of c/c++ sources that define the generated optimizations."
                                    },
                                    "type": "Words"
                                  }
                                ],
                                "inner": []
                              },
                              "type": "Paragraph"
                            }
                          ]
                        }
                      ]
                    },
                    "type": "BulletList"
                  }
                ]
              }
            ]
          },
          "type": "BulletList"
        }
      ],
      "title": "Build report"
    },
    {
      "children": [
        {
          "data": {
            "inline": [
              {
                "data": {
                  "value": "To be completed."
                },
                "type": "Words"
              }
            ],
            "inner": []
          },
          "type": "Paragraph"
        }
      ],
      "title": "Runtime Trace"
    }
  ],
  "example_section_data": {
    "children": [],
    "title": null
  },
  "item_file": null,
  "item_line": null,
  "item_type": null,
  "ordered_sections": [],
  "references": null,
  "refs": [],
  "see_also": [],
  "signature": {
    "value": null
  }
}