{
  "aliases": [],
  "arbitrary": [
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": [
                    "scikit-build"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " provides two separate concepts geared towards the users of Python extension modules."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "A "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "setuptools"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " replacement (legacy behaviour)"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "A series of "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              "cmake"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " modules with definitions which help building Python extensions"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "EnumeratedList"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "children": [
                    {
                      "data": {
                        "value": "It is possible to use "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "scikit-build"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": "'s "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "cmake"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " modules to "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "domain": null,
                        "role": null,
                        "value": "bypass the\ncmake setup mechanism"
                      },
                      "type": "Directive"
                    },
                    {
                      "data": {
                        "value": " completely, and to write targets which call "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "f2py\n-c"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": ". This usage is "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "content": {
                          "value": "not recommended"
                        }
                      },
                      "type": "Strong"
                    },
                    {
                      "data": {
                        "value": " since the point of these build system documents are to move away from the internal "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "numpy.distutils"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " methods."
                      },
                      "type": "Words"
                    }
                  ]
                },
                "type": "Paragraph"
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "For situations where no "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "setuptools"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " replacements are required or wanted (i.e. if "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "wheels"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " are not needed), it is recommended to instead use the vanilla "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " setup described in "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "f2py-cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 0,
      "target": "f2py-skbuild",
      "title": "Using via ``scikit-build``"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "We will consider the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "fib"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "  example from "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "f2py-getting-started"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " section."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "./../code/fib1.f",
            "content": "",
            "name": "literalinclude",
            "options": [
              [
                "language",
                "fortran"
              ]
            ]
          },
          "type": "BlockDirective"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Fibonacci Walkthrough (F77)"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Consider using the following "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "CMakeLists.txt"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "./../code/CMakeLists_skbuild.txt",
            "content": "",
            "name": "literalinclude",
            "options": [
              [
                "language",
                "cmake"
              ]
            ]
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Much of the logic is the same as in "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "f2py-cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": ", however notably here the appropriate module suffix is generated via "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "sysconfig.get_config_var(\"SO\")"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": ". The resulting extension can be built and loaded in the standard workflow."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "ls .\n# CMakeLists.txt fib1.f\ncmake -S . -B build\ncmake --build build\ncd build\npython -c \"import numpy as np; import fibby; a = np.zeros(9); fibby.fib(a); print (a)\"\n# [ 0.  1.  1.  2.  3.  5.  8. 13. 21.]"
          },
          "type": "BlockVerbatim"
        }
      ],
      "level": 2,
      "target": null,
      "title": "``CMake`` modules only"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "children": [
                    {
                      "data": {
                        "content": {
                          "value": "As of November 2021"
                        }
                      },
                      "type": "Strong"
                    }
                  ]
                },
                "type": "Paragraph"
              },
              {
                "data": {
                  "children": [
                    {
                      "data": {
                        "value": "The behavior described here of driving the "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "cmake"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " build of a module is considered to be legacy behaviour and should not be depended on."
                      },
                      "type": "Words"
                    }
                  ]
                },
                "type": "Paragraph"
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "The utility of "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "scikit-build"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " lies in being able to drive the generation of more than extension modules, in particular a common usage pattern is the generation of Python distributables (for example for PyPI)."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "The workflow with "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "scikit-build"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " straightforwardly supports such packaging requirements. Consider augmenting the project with a "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "setup.py"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " as defined:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "./../code/setup_skbuild.py",
            "content": "",
            "name": "literalinclude",
            "options": [
              [
                "language",
                "python"
              ]
            ]
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Along with a commensurate "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "pyproject.toml"
                  ]
                },
                "type": "Verbatim"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "./../code/pyproj_skbuild.toml",
            "content": "",
            "name": "literalinclude",
            "options": [
              [
                "language",
                "toml"
              ]
            ]
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Together these can build the extension using "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " in tandem with other standard "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "setuptools"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " outputs. Running "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " through "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "setup.py"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " is mostly used when it is necessary to integrate with extension modules not built with "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "cmake"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "ls .\n# CMakeLists.txt fib1.f pyproject.toml setup.py\npython setup.py build_ext --inplace\npython -c \"import numpy as np; import fibby.fibby; a = np.zeros(9); fibby.fibby.fib(a); print (a)\"\n# [ 0.  1.  1.  2.  3.  5.  8. 13. 21.]"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Where we have modified the path to the module as "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "--inplace"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " places the extension module in a subfolder."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _bypass the cmake setup mechanism: https://scikit-build.readthedocs.io/en/latest/cmake-modules/F2PY.html"
          },
          "type": "Unimplemented"
        }
      ],
      "level": 2,
      "target": null,
      "title": "``setuptools`` replacement"
    }
  ],
  "content": {},
  "example_section_data": {
    "children": [],
    "level": 0,
    "target": null,
    "title": null
  },
  "item_file": null,
  "item_line": null,
  "item_type": null,
  "ordered_sections": [],
  "references": null,
  "see_also": [],
  "signature": {
    "value": null
  }
}