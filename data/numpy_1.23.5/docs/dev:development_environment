{
  "aliases": [],
  "arbitrary": [
    {
      "children": [],
      "level": 0,
      "target": "development-environment",
      "title": "Setting up and using your development environment",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Since NumPy contains parts written in C and Cython that need to be compiled before use, make sure you have the necessary compilers and Python development headers installed - see "
            },
            {
              "type": "inlineCode",
              "value": "building-from-source"
            },
            {
              "type": "text",
              "value": ". Building NumPy as of version "
            },
            {
              "type": "inlineCode",
              "value": "1.17"
            },
            {
              "type": "text",
              "value": " requires a C99 compliant compiler."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Having compiled code also means that importing NumPy from the development sources needs some additional steps, which are explained below.  For the rest of this chapter we assume that you have set up your git repo as described in "
            },
            {
              "type": "inlineCode",
              "value": "using-git"
            },
            {
              "type": "text",
              "value": "."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "text",
                  "value": "note "
                }
              ],
              "type": "admonitionTitle"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "If you are having trouble building NumPy from source or setting up your local development environment, you can try to build NumPy with GitHub Codespaces. It allows you to create the correct development environment right in your browser, reducing the need to install local development environments and deal with incompatible dependencies."
                }
              ],
              "type": "paragraph"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "If you have good internet connectivity and want a temporary set-up, it is often faster to work on NumPy in a Codespaces environment. For documentation on how to get started with Codespaces, see "
                },
                {
                  "domain": null,
                  "role": null,
                  "type": "Directive",
                  "value": "the Codespaces docs <https://docs.github.com/en/codespaces>"
                },
                {
                  "type": "text",
                  "value": ". When creating a codespace for the "
                },
                {
                  "type": "inlineCode",
                  "value": "numpy/numpy"
                },
                {
                  "type": "text",
                  "value": " repository, the default 2-core machine type works; 4-core will build and work a bit faster (but of course at a cost of halving your number of free usage hours). Once your codespace has started, you can run "
                },
                {
                  "type": "inlineCode",
                  "value": "conda activate numpy-dev"
                },
                {
                  "type": "text",
                  "value": " and your development environment is completely set up - you can then follow the relevant parts of the NumPy documentation to build, test, develop, write docs, and contribute to NumPy."
                }
              ],
              "type": "paragraph"
            }
          ],
          "kind": "note",
          "type": "admonition"
        }
      ],
      "level": 1,
      "target": "recommended-development-setup",
      "title": "Recommended development setup",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Before running the tests, first install the test dependencies      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python -m pip install -r test_requirements.txt"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "To build the development version of NumPy and run tests, spawn interactive shells with the Python import paths properly set up etc., do one of      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py -v\n$ python runtests.py -v -s random\n$ python runtests.py -v -t numpy/core/tests/test_nditer.py::test_iter_c_order\n$ python runtests.py --ipython\n$ python runtests.py --python somescript.py\n$ python runtests.py --bench\n$ python runtests.py -g -m full"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "This builds NumPy first, so the first time it may take a few minutes.  If you specify "
            },
            {
              "type": "inlineCode",
              "value": "-n"
            },
            {
              "type": "text",
              "value": ", the tests are run against the version of NumPy (if any) found on current PYTHONPATH."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "text",
                  "value": "note "
                }
              ],
              "type": "admonitionTitle"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "If the above commands result in "
                },
                {
                  "type": "inlineCode",
                  "value": "RuntimeError: Cannot parse version 0+untagged.xxxxx"
                },
                {
                  "type": "text",
                  "value": ", run "
                },
                {
                  "type": "inlineCode",
                  "value": "git pull upstream main --tags"
                },
                {
                  "type": "text",
                  "value": "."
                }
              ],
              "type": "paragraph"
            }
          ],
          "kind": "note",
          "type": "admonition"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "When specifying a target using "
            },
            {
              "type": "inlineCode",
              "value": "-s"
            },
            {
              "type": "text",
              "value": ", "
            },
            {
              "type": "inlineCode",
              "value": "-t"
            },
            {
              "type": "text",
              "value": ", or "
            },
            {
              "type": "inlineCode",
              "value": "--python"
            },
            {
              "type": "text",
              "value": ", additional arguments may be forwarded to the target embedded by "
            },
            {
              "type": "inlineCode",
              "value": "runtests.py"
            },
            {
              "type": "text",
              "value": " by passing the extra arguments after a bare "
            },
            {
              "type": "inlineCode",
              "value": "--"
            },
            {
              "type": "text",
              "value": ". For example, to run a test method with the "
            },
            {
              "type": "inlineCode",
              "value": "--pdb"
            },
            {
              "type": "text",
              "value": " flag forwarded to the target, run the following      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py -t numpy/tests/test_scripts.py::test_f2py -- --pdb"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "When using pytest as a target (the default), you can "
            },
            {
              "domain": null,
              "role": null,
              "type": "Directive",
              "value": "match test names using python operators"
            },
            {
              "type": "text",
              "value": " by passing the "
            },
            {
              "type": "inlineCode",
              "value": "-k"
            },
            {
              "type": "text",
              "value": " argument to pytest      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py -v -t numpy/core/tests/test_multiarray.py -- -k \"MatMul and not vector\""
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "text",
                  "value": "note "
                }
              ],
              "type": "admonitionTitle"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "Remember that all tests of NumPy should pass before committing your changes."
                }
              ],
              "type": "paragraph"
            }
          ],
          "kind": "note",
          "type": "admonition"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Using "
            },
            {
              "type": "inlineCode",
              "value": "runtests.py"
            },
            {
              "type": "text",
              "value": " is the recommended approach to running tests. There are also a number of alternatives to it, for example in-place build or installing to a virtualenv or a conda environment. See the FAQ below for details."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "text",
                  "value": "note "
                }
              ],
              "type": "admonitionTitle"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "Some of the tests in the test suite require a large amount of memory, and are skipped if your system does not have enough."
                }
              ],
              "type": "paragraph"
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "To override the automatic detection of available memory, set the environment variable "
                },
                {
                  "type": "inlineCode",
                  "value": "NPY_AVAILABLE_MEM"
                },
                {
                  "type": "text",
                  "value": ", for example "
                },
                {
                  "type": "inlineCode",
                  "value": "NPY_AVAILABLE_MEM=32GB"
                },
                {
                  "type": "text",
                  "value": ", or using pytest "
                },
                {
                  "type": "inlineCode",
                  "value": "--available-memory=32GB"
                },
                {
                  "type": "text",
                  "value": " target option."
                }
              ],
              "type": "paragraph"
            }
          ],
          "kind": "note",
          "type": "admonition"
        }
      ],
      "level": 1,
      "target": "testing-builds",
      "title": "Testing builds",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "For development, you can set up an in-place build so that changes made to "
            },
            {
              "type": "inlineCode",
              "value": ".py"
            },
            {
              "type": "text",
              "value": " files have effect without rebuild. First, run      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python setup.py build_ext -i"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "This allows you to import the in-place built NumPy "
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "from the repo base\ndirectory only"
                }
              ],
              "type": "emphasis"
            },
            {
              "type": "text",
              "value": ".  If you want the in-place build to be visible outside that base dir, you need to point your "
            },
            {
              "type": "inlineCode",
              "value": "PYTHONPATH"
            },
            {
              "type": "text",
              "value": " environment variable to this directory.  Some IDEs ("
            },
            {
              "domain": null,
              "role": null,
              "type": "Directive",
              "value": "Spyder"
            },
            {
              "type": "text",
              "value": " for example) have utilities to manage "
            },
            {
              "type": "inlineCode",
              "value": "PYTHONPATH"
            },
            {
              "type": "text",
              "value": ".  On Linux and OSX, you can run the command      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ export PYTHONPATH=$PWD"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "and on Windows      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ set PYTHONPATH=/path/to/numpy"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Now editing a Python source file in NumPy allows you to immediately test and use your changes (in "
            },
            {
              "type": "inlineCode",
              "value": ".py"
            },
            {
              "type": "text",
              "value": " files), by simply restarting the interpreter."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Note that another way to do an inplace build visible outside the repo base dir is with "
            },
            {
              "type": "inlineCode",
              "value": "python setup.py develop"
            },
            {
              "type": "text",
              "value": ".  Instead of adjusting "
            },
            {
              "type": "inlineCode",
              "value": "PYTHONPATH"
            },
            {
              "type": "text",
              "value": ", this installs a "
            },
            {
              "type": "inlineCode",
              "value": ".egg-link"
            },
            {
              "type": "text",
              "value": " file into your site-packages as well as adjusts the "
            },
            {
              "type": "inlineCode",
              "value": "easy-install.pth"
            },
            {
              "type": "text",
              "value": " there, so its a more permanent (and magical) operation."
            }
          ],
          "type": "paragraph"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _Spyder: https://www.spyder-ide.org/"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Building in-place",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Build options can be discovered by running any of      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python setup.py --help\n$ python setup.py --help-commands"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "It's possible to do a parallel build with "
            },
            {
              "type": "inlineCode",
              "value": "numpy.distutils"
            },
            {
              "type": "text",
              "value": " with the "
            },
            {
              "type": "inlineCode",
              "value": "-j"
            },
            {
              "type": "text",
              "value": " option; see "
            },
            {
              "type": "inlineCode",
              "value": "parallel-builds"
            },
            {
              "type": "text",
              "value": " for more details."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "A similar approach to in-place builds and use of "
            },
            {
              "type": "inlineCode",
              "value": "PYTHONPATH"
            },
            {
              "type": "text",
              "value": " but outside the source tree is to use      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ pip install . --prefix /some/owned/folder\n$ export PYTHONPATH=/some/owned/folder/lib/python3.4/site-packages"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "NumPy uses a series of tests to probe the compiler and libc libraries for functions. The results are stored in "
            },
            {
              "type": "inlineCode",
              "value": "_numpyconfig.h"
            },
            {
              "type": "text",
              "value": " and "
            },
            {
              "type": "inlineCode",
              "value": "config.h"
            },
            {
              "type": "text",
              "value": " files using "
            },
            {
              "type": "inlineCode",
              "value": "HAVE_XXX"
            },
            {
              "type": "text",
              "value": " definitions. These tests are run during the "
            },
            {
              "type": "inlineCode",
              "value": "build_src"
            },
            {
              "type": "text",
              "value": " phase of the "
            },
            {
              "type": "inlineCode",
              "value": "_multiarray_umath"
            },
            {
              "type": "text",
              "value": " module in the "
            },
            {
              "type": "inlineCode",
              "value": "generate_config_h"
            },
            {
              "type": "text",
              "value": " and "
            },
            {
              "type": "inlineCode",
              "value": "generate_numpyconfig_h"
            },
            {
              "type": "text",
              "value": " functions. Since the output of these calls includes many compiler warnings and errors, by default it is run quietly. If you wish to see this output, you can run the "
            },
            {
              "type": "inlineCode",
              "value": "build_src"
            },
            {
              "type": "text",
              "value": " stage verbosely      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python build build_src -v"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Other build options",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "A frequently asked question is \"How do I set up a development version of NumPy in parallel to a released version that I use to do my job/research?\"."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "One simple way to achieve this is to install the released version in site-packages, by using pip or conda for example, and set up the development version in a virtual environment."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "If you use conda, we recommend creating a separate virtual environment for numpy development using the "
            },
            {
              "type": "inlineCode",
              "value": "environment.yml"
            },
            {
              "type": "text",
              "value": " file in the root of the repo (this will create the environment and install all development dependencies at once)      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ conda env create -f environment.yml  # `mamba` works too for this command\n$ conda activate numpy-dev"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "If you installed Python some other way than conda, first install "
            },
            {
              "anchor": null,
              "exists": true,
              "kind": "module",
              "reference": {
                "kind": "api",
                "module": "virtualenv",
                "path": "virtualenv",
                "type": "RefInfo",
                "version": "*"
              },
              "type": "Link",
              "value": "virtualenv"
            },
            {
              "type": "text",
              "value": " (optionally use "
            },
            {
              "domain": null,
              "role": null,
              "type": "Directive",
              "value": "virtualenvwrapper"
            },
            {
              "type": "text",
              "value": "), then create your virtualenv (named "
            },
            {
              "type": "inlineCode",
              "value": "numpy-dev"
            },
            {
              "type": "text",
              "value": " here) with      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ virtualenv numpy-dev"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Now, whenever you want to switch to the virtual environment, you can use the command "
            },
            {
              "type": "inlineCode",
              "value": "source numpy-dev/bin/activate"
            },
            {
              "type": "text",
              "value": ", and "
            },
            {
              "type": "inlineCode",
              "value": "deactivate"
            },
            {
              "type": "text",
              "value": " to exit from the virtual environment and back to your previous shell."
            }
          ],
          "type": "paragraph"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Using virtual environments",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Besides using "
            },
            {
              "type": "inlineCode",
              "value": "runtests.py"
            },
            {
              "type": "text",
              "value": ", there are various ways to run the tests.  Inside the interpreter, tests can be run like this      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": ">>> np.test()  # doctest: +SKIPBLOCK\n>>> np.test('full')   # Also run tests marked as slow\n>>> np.test('full', verbose=2)   # Additionally print test name/file\n\nAn example of a successful test :\n``4686 passed, 362 skipped, 9 xfailed, 5 warnings in 213.99 seconds``"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Or a similar way from the command line      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python -c \"import numpy as np; np.test()\""
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Tests can also be run with "
            },
            {
              "type": "inlineCode",
              "value": "pytest numpy"
            },
            {
              "type": "text",
              "value": ", however then the NumPy-specific plugin is not found which causes strange side effects"
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Running individual test files can be useful; it's much faster than running the whole test suite or that of a whole module (example: "
            },
            {
              "type": "inlineCode",
              "value": "np.random.test()"
            },
            {
              "type": "text",
              "value": "). This can be done with      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python path_to_testfile/test_file.py"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "That also takes extra arguments, like "
            },
            {
              "type": "inlineCode",
              "value": "--pdb"
            },
            {
              "type": "text",
              "value": " which drops you into the Python debugger when a test fails or an exception is raised."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Running tests with "
            },
            {
              "domain": null,
              "role": null,
              "type": "Directive",
              "value": "tox"
            },
            {
              "type": "text",
              "value": " is also supported.  For example, to build NumPy and run the test suite with Python 3.9, use      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ tox -e py39"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "For more extensive information, see "
            },
            {
              "type": "inlineCode",
              "value": "testing-guidelines"
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "type": "text",
                  "value": "Note: do not run the tests from the root directory of your numpy git repo without ``runtests.py``,\nthat will result in strange test errors."
                }
              ],
              "type": "emphasis"
            }
          ],
          "type": "paragraph"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Running tests",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Lint checks can be performed on newly added lines of Python code."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Install all dependent packages using pip      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python -m pip install -r linter_requirements.txt"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "To run lint checks before committing new code, run      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py --lint uncommitted"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "To check all changes in newly added Python code of current branch with target branch, run      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py --lint main"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "If there are no errors, the script exits with no message. In case of errors      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ python runtests.py --lint main\n./numpy/core/tests/test_scalarmath.py:34:5: E303 too many blank lines (3)\n1       E303 too many blank lines (3)"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "It is advisable to run lint checks before pushing commits to a remote branch since the linter runs as part of the CI pipeline."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "For more details on Style Guidelines:"
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "domain": null,
                          "role": null,
                          "type": "Directive",
                          "value": "Python Style Guide"
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "domain": null,
                          "role": null,
                          "type": "Directive",
                          "value": "C Style Guide"
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                }
              ],
              "ordered": false,
              "spread": false,
              "start": 1,
              "type": "list"
            }
          ],
          "type": "blockquote"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Running Linting",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Rebuilding NumPy after making changes to compiled code can be done with the same build command as you used previously - only the changed files will be re-built.  Doing a full build, which sometimes is necessary, requires cleaning the workspace first.  The standard way of doing this is ("
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "note: deletes any\nuncommitted files!"
                }
              ],
              "type": "emphasis"
            },
            {
              "type": "text",
              "value": ")      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ git clean -xdf"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "When you want to discard all changes and go back to the last commit in the repo, use one of      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ git checkout .\n$ git reset --hard"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Rebuilding & cleaning the workspace",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "Another frequently asked question is \"How do I debug C code inside NumPy?\". First, ensure that you have gdb installed on your system with the Python extensions (often the default on Linux). You can see which version of Python is running inside gdb to verify your setup      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "(gdb) python\n>import sys\n>print(sys.version_info)\n>end\nsys.version_info(major=3, minor=7, micro=0, releaselevel='final', serial=0)"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Most python builds do not include debug symbols and are built with compiler optimizations enabled. To get the best debugging experience using a debug build of Python is encouraged, see "
            },
            {
              "type": "inlineCode",
              "value": "advanced_debugging"
            },
            {
              "type": "text",
              "value": "."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Next you need to write a Python script that invokes the C code whose execution you want to debug. For instance "
            },
            {
              "type": "inlineCode",
              "value": "mytest.py"
            },
            {
              "type": "text",
              "value": "      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "import numpy as np\nx = np.arange(5)\nnp.empty_like(x)"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Now, you can run      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "$ gdb --args python runtests.py -g --python mytest.py"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "And then in the debugger      "
            }
          ],
          "type": "paragraph"
        },
        {
          "type": "code",
          "value": "(gdb) break array_empty_like\n(gdb) run"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "The execution will now stop at the corresponding C function and you can step through it as usual. A number of useful Python-specific commands are available. For example to see where in the Python code you are, use "
            },
            {
              "type": "inlineCode",
              "value": "py-list"
            },
            {
              "type": "text",
              "value": ", to see the python traceback, use "
            },
            {
              "type": "inlineCode",
              "value": "py-bt"
            },
            {
              "type": "text",
              "value": ".  For more details, see "
            },
            {
              "domain": null,
              "role": null,
              "type": "Directive",
              "value": "DebuggingWithGdb"
            },
            {
              "type": "text",
              "value": ". Here are some commonly used commands:"
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "children": [
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "inlineCode",
                          "value": "list"
                        },
                        {
                          "type": "text",
                          "value": ": List specified function or line."
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "inlineCode",
                          "value": "next"
                        },
                        {
                          "type": "text",
                          "value": ": Step program, proceeding through subroutine calls."
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "inlineCode",
                          "value": "step"
                        },
                        {
                          "type": "text",
                          "value": ": Continue program being debugged, after signal or breakpoint."
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "type": "inlineCode",
                          "value": "print"
                        },
                        {
                          "type": "text",
                          "value": ": Print value of expression EXP."
                        }
                      ],
                      "type": "paragraph"
                    }
                  ],
                  "spread": false,
                  "type": "listItem"
                }
              ],
              "ordered": false,
              "spread": false,
              "start": 1,
              "type": "list"
            }
          ],
          "type": "blockquote"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Rich support for Python debugging requires that the "
            },
            {
              "type": "inlineCode",
              "value": "python-gdb.py"
            },
            {
              "type": "text",
              "value": " script distributed with Python is installed in a path where gdb can find it. If you installed your Python build from your system package manager, you likely do not need to manually do anything. However, if you built Python from source, you will likely need to create a "
            },
            {
              "type": "inlineCode",
              "value": ".gdbinit"
            },
            {
              "type": "text",
              "value": " file in your home directory pointing gdb at the location of your Python installation. For example, a version of python installed via "
            },
            {
              "children": [
                {
                  "type": "text",
                  "value": "pyenv"
                }
              ],
              "title": "",
              "type": "link",
              "url": "https://github.com/pyenv/pyenv"
            },
            {
              "type": "text",
              "value": " needs a "
            },
            {
              "type": "inlineCode",
              "value": ".gdbinit"
            },
            {
              "type": "text",
              "value": " file with the following contents:"
            }
          ],
          "type": "paragraph"
        },
        {
          "args": "text",
          "children": [],
          "name": "code-block",
          "options": {},
          "type": "mystDirective",
          "value": "add-auto-load-safe-path ~/.pyenv"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Instead of plain "
            },
            {
              "type": "inlineCode",
              "value": "gdb"
            },
            {
              "type": "text",
              "value": " you can of course use your favourite alternative debugger; run it on the python binary with arguments "
            },
            {
              "type": "inlineCode",
              "value": "runtests.py -g --python mytest.py"
            },
            {
              "type": "text",
              "value": "."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "Building NumPy with a Python built with debug support (on Linux distributions typically packaged as "
            },
            {
              "type": "inlineCode",
              "value": "python-dbg"
            },
            {
              "type": "text",
              "value": ") is highly recommended."
            }
          ],
          "type": "paragraph"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _DebuggingWithGdb: https://wiki.python.org/moin/DebuggingWithGdb"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _tox: https://tox.readthedocs.io/"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _virtualenv: http://www.virtualenv.org/"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _virtualenvwrapper: http://www.doughellmann.com/projects/virtualenvwrapper/"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _Waf: https://code.google.com/p/waf/"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _`match test names using python operators`: https://docs.pytest.org/en/latest/usage.html#specifying-tests-selecting-tests"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _`Python Style Guide`: https://www.python.org/dev/peps/pep-0008/"
        },
        {
          "placeholder": "target",
          "type": "Unimplemented",
          "value": ".. _`C Style Guide`: https://numpy.org/neps/nep-0045-c_style_guide.html"
        }
      ],
      "level": 1,
      "target": "debugging",
      "title": "Debugging",
      "type": "Section"
    },
    {
      "children": [
        {
          "children": [
            {
              "type": "text",
              "value": "The best strategy to better understand the code base is to pick something you want to change and start reading the code to figure out how it works. When in doubt, you can ask questions on the mailing list. It is perfectly okay if your pull requests aren't perfect, the community is always happy to help. As a volunteer project, things do sometimes get dropped and it's totally fine to ping us if something has sat without a response for about two to four weeks."
            }
          ],
          "type": "paragraph"
        },
        {
          "children": [
            {
              "type": "text",
              "value": "So go ahead and pick something that annoys or confuses you about NumPy, experiment with the code, hang around for discussions or go through the reference documents to try to fix it. Things will fall in place and soon you'll have a pretty good understanding of the project as a whole. Good Luck!"
            }
          ],
          "type": "paragraph"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Understanding the code & getting started",
      "type": "Section"
    }
  ],
  "content": {},
  "example_section_data": {
    "children": [],
    "level": 0,
    "target": null,
    "title": null,
    "type": "Section"
  },
  "item_file": null,
  "item_line": null,
  "item_type": null,
  "ordered_sections": [],
  "references": null,
  "see_also": [],
  "signature": {
    "type": "Signature",
    "value": null
  },
  "type": "DocBlob"
}