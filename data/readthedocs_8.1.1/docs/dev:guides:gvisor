{
  "aliases": [],
  "arbitrary": [
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "You can mostly get by just following installation instructions in the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "gVisor\nDocker Quick Start"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " guide."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "There are a few caveats to installation, which likely depend on your local environment. For "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "systemd"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " based OS, you do need to configure the Docker daemon to avoid systemd cgroups."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "",
            "content": ".. tab:: Arch\n\n    Follow the installation and quick start directions like normal:\n\n    .. code:: console\n\n        % yay -S gvisor-bin\n        ...\n        % sudo runsc install\n\n    You do need to instruct Docker to avoid systemd cgroups. You will need\n    to make further changes to ``/etc/docker/daemon.json`` and restart the\n    Docker service:\n\n    .. code:: json\n\n        {\n            \"runtimes\": {\n                \"runsc\": {\n                    \"path\": \"/usr/bin/runsc\"\n                }\n            },\n            \"exec-opts\": [\"native.cgroupdriver=cgroupfs\"]\n        }\n\n.. tab:: Fedora\n\n   - Install docker from their repositories,\n     the one included in Fedora doesn't work,\n     using their `convenience script`_ is an easy way to do it.\n   - `Install gvisor manually`_, the one included in Fedora doesn't work.\n   - Enable cgroups v1:\n\n     .. code:: console\n\n        % sudo grubby --update-kernel=ALL --args=\"systemd.unified_cgroup_hierarchy=0\"\n\n   .. _convenience script: https://docs.docker.com/engine/install/fedora/#install-using-the-convenience-script\n   .. _Install gvisor manually: https://gvisor.dev/docs/user_guide/install/#install-latest",
            "name": "tabs",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Docker is correctly configured when you can run this command from the quick start guide:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "% docker run --rm -ti --runtime=runsc readthedocs/build dmesg\n[    0.000000] Starting gVisor...\n..."
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _gVisor Docker Quick Start: https://gvisor.dev/docs/user_guide/quick_start/docker/"
          },
          "type": "Unimplemented"
        }
      ],
      "level": 0,
      "target": null,
      "title": "gVisor Installation"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "You can enable the gVisor feature flag on a project and you should see the container created with "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "runtime=runsc"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " now."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 1,
      "target": null,
      "title": "Testing gVisor"
    }
  ],
  "content": {},
  "example_section_data": {
    "children": [],
    "level": 0,
    "target": null,
    "title": null
  },
  "item_file": null,
  "item_line": null,
  "item_type": null,
  "ordered_sections": [],
  "references": null,
  "see_also": [],
  "signature": {
    "value": null
  }
}