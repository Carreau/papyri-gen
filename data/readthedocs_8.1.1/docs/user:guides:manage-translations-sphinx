{
  "aliases": [],
  "arbitrary": [
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "This guide walks through the process needed to manage translations of your documentation. Once this work is done, you can setup your project under Read the Docs to build each language of your documentation by reading "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "/localization"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 0,
      "title": "Manage Translations for Sphinx projects"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "There are many different ways to manage documentation in multiple languages by using different tools or services. All of them have their pros and cons depending on the context of your project or organization."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "In this guide we will focus our efforts around two different methods: manual and using "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "Transifex_"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "In both methods, we need to follow these steps to translate our documentation:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Create translatable files ("
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              ".pot"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " and "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              ".po"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " extensions) from source language"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Translate the text on those files from source language to target language"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Build the documentation in "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": {
                              "value": "target language"
                            }
                          },
                          "type": "Emph"
                        },
                        {
                          "data": {
                            "value": " using the translated texts"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "EnumeratedList"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Besides these steps, once we have published our first translated version of our documentation, we will want to keep it updated from the source language. At that time, the workflow would be:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Update our translatable files from source language"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Translate only "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": {
                              "value": "new"
                            }
                          },
                          "type": "Emph"
                        },
                        {
                          "data": {
                            "value": " and "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": {
                              "value": "modified"
                            }
                          },
                          "type": "Emph"
                        },
                        {
                          "data": {
                            "value": " texts in source language into target language"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Build the documentation using the most up to date translations"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  }
                ]
              }
            ]
          },
          "type": "EnumeratedList"
        }
      ],
      "level": 1,
      "title": "Overview"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "To generate these "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".pot"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " files it's needed to run this command from your "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "docs/"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " directory:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "sphinx-build -b gettext . _build/gettext",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "argument": "",
            "content": "We recommend configuring Sphinx to use gettext_uuid_ as ``True``\nand also gettext_compact_ as ``False`` to generate ``.pot`` files.\n\n.. Unfortunately these are custom types and can't yet be used with intersphinx\n.. https://github.com/sphinx-doc/sphinx/issues/5562\n.. _gettext_uuid: https://www.sphinx-doc.org/page/usage/configuration.html#confval-gettext_uuid\n.. _gettext_compact: https://www.sphinx-doc.org/page/usage/configuration.html#confval-gettext_compact",
            "name": "tip",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "This command will leave the generated files under "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "_build/gettext"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 1,
      "title": "Create translatable files"
    },
    {
      "children": [],
      "level": 1,
      "title": "Translate text from source language"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "We recommend using "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "sphinx-intl"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " tool for this workflow."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _sphinx-intl: https://pypi.org/project/sphinx-intl/"
          },
          "type": "Unimplemented"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "First, you need to install it:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "pip install sphinx-intl",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "As a second step, we want to create a directory with each translated file per target language (in this example we are using Spanish/Argentina and Portuguese/Brazil). This can be achieved with the following command:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "sphinx-intl update -p _build/gettext -l es_AR -l pt_BR",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "This command will create a directory structure similar to the following (with one "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".po"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " file per "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".rst"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " file in your documentation):    "
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "value": "locale\n\u251c\u2500\u2500 es_AR\n\u2502   \u2514\u2500\u2500 LC_MESSAGES\n\u2502       \u2514\u2500\u2500 index.po\n\u2514\u2500\u2500 pt_BR\n    \u2514\u2500\u2500 LC_MESSAGES\n        \u2514\u2500\u2500 index.po"
          },
          "type": "BlockVerbatim"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Now, you can just open those "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".po"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " files with a text editor and translate them taking care of no breaking the reST notation. Example:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "po",
            "content": "# b8f891b8443f4a45994c9c0a6bec14c3\n#: ../../index.rst:4\nmsgid \"\"\n\"Read the Docs hosts documentation for the open source community.\"\n\"It supports :ref:`Sphinx <sphinx>` docs written with reStructuredText.\"\nmsgstr \"\"\n\"FILL HERE BY TARGET LANGUAGE FILL HERE BY TARGET LANGUAGE FILL HERE \"\n\"BY TARGET LANGUAGE :ref:`Sphinx <sphinx>` FILL HERE.\"",
            "name": "code-block",
            "options": []
          },
          "type": "BlockDirective"
        }
      ],
      "level": 2,
      "title": "Manually"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "Transifex_"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " is a platform that simplifies the manipulation of "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".po"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " files and offers many useful features to make the translation process as smooth as possible. These features includes a great web based UI, "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "Translation Memory"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": ", collaborative translation, etc."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _Transifex: https://www.transifex.com/"
          },
          "type": "Unimplemented"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _Translation Memory: https://docs.transifex.com/setup/translation-memory"
          },
          "type": "Unimplemented"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "You need to create an account in their service and a new project before start."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "After that, you need to install the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "transifex-client"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": " tool which will help you in the process to upload source files, update them and also download translated files. To do this, run this command:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _transifex-client: https://docs.transifex.com/client/introduction"
          },
          "type": "Unimplemented"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "pip install transifex-client",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "After installing it, you need to configure your account. For this, you need to create an API Token for your user to access this service through the command line. This can be done under your "
                },
                "type": "Words"
              },
              {
                "data": {
                  "domain": null,
                  "role": null,
                  "value": "User's Settings"
                },
                "type": "Directive"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "placeholder": "target",
            "value": ".. _User's Settings: https://www.transifex.com/user/settings/api/"
          },
          "type": "Unimplemented"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Now, you need to setup it to use this token:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "tx init --token $TOKEN --no-interactive",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "The next step is to map every "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".pot"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " file you have created in the previous step to a resource under Transifex. To achieve this, you need to run this command:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "tx config mapping-bulk \\\n    --project $TRANSIFEX_PROJECT \\\n    --file-extension '.pot' \\\n    --source-file-dir docs/_build/gettext \\\n    --source-lang en \\\n    --type PO \\\n    --expression 'locale/<lang>/LC_MESSAGES/{filepath}/{filename}.po' \\\n    --execute",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "This command will generate a file at "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".tx/config"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " with all the information needed by the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "transifext-client"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " tool to keep your translation synchronized."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Finally, you need to upload these files to Transifex platform so translators can start their work. To do this, you can run this command:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "tx push --source",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Now, you can go to your Transifex's project and check that there is one resource per "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".rst"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " file of your documentation. After the source files are translated using Transifex, you can download all the translations for all the languages by running:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "tx pull --all",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "This command will leave the "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    ".po"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " files needed for building the documentation in the target language under "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "locale/<lang>/LC_MESSAGES"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "children": [
                    {
                      "data": {
                        "value": "It's important to use always the same method to translate the documentation and do not mix them. Otherwise, it's very easy to end up with inconsistent translations or losing already translated text."
                      },
                      "type": "Words"
                    }
                  ]
                },
                "type": "Paragraph"
              }
            ],
            "kind": "warning",
            "title": ""
          },
          "type": "Admonition"
        }
      ],
      "level": 2,
      "title": "Using Transifex"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Finally, to build our documentation in Spanish(Argentina) we need to tell Sphinx builder the target language with the following command:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "argument": "bash $",
            "content": "sphinx-build -b html -D language=es_AR . _build/html/es_AR",
            "name": "prompt",
            "options": []
          },
          "type": "BlockDirective"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "children": [
                    {
                      "data": {
                        "value": "There is no need to create a new "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "conf.py"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " to redefine the "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "language"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " for the Spanish version of this documentation,  but you need to set "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "domain": null,
                        "role": null,
                        "value": "locale_dirs_"
                      },
                      "type": "Directive"
                    },
                    {
                      "data": {
                        "value": " to "
                      },
                      "type": "Words"
                    },
                    {
                      "data": {
                        "value": [
                          "[\"locale\"]"
                        ]
                      },
                      "type": "Verbatim"
                    },
                    {
                      "data": {
                        "value": " for Sphinx to find the translated content."
                      },
                      "type": "Words"
                    }
                  ]
                },
                "type": "Paragraph"
              },
              {
                "data": {
                  "placeholder": "target",
                  "value": ".. _locale_dirs: https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-locale_dirs"
                },
                "type": "Unimplemented"
              }
            ],
            "kind": "note",
            "title": ""
          },
          "type": "Admonition"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "After running this command, the Spanish(Argentina) version of your documentation will be under "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "_build/html/es_AR"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": "."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 1,
      "title": "Build the documentation in target language"
    },
    {
      "children": [],
      "level": 1,
      "title": "Summary"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "Once you have done changes in your documentation, you may want to make these additions/modifications available for translators so they can update it:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Create the "
                          },
                          "type": "Words"
                        },
                        {
                          "data": {
                            "value": [
                              ".pot"
                            ]
                          },
                          "type": "Verbatim"
                        },
                        {
                          "data": {
                            "value": " files:"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "argument": "bash $",
                      "content": "sphinx-build -b gettext . _build/gettext",
                      "name": "prompt",
                      "options": []
                    },
                    "type": "BlockDirective"
                  },
                  {
                    "data": {
                      "value": ".. For the manual workflow, we need to run this command\n\n     $ sphinx-intl update -p _build/gettext -l es_AR -l pt_BR"
                    },
                    "type": "Comment"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Push new files to Transifex"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "argument": "bash $",
                      "content": "tx push --sources",
                      "name": "prompt",
                      "options": []
                    },
                    "type": "BlockDirective"
                  }
                ]
              }
            ]
          },
          "type": "EnumeratedList"
        }
      ],
      "level": 2,
      "title": "Update sources to be translated"
    },
    {
      "children": [
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "When translators have finished their job, you may want to update the documentation by pulling the changes from Transifex:"
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        },
        {
          "data": {
            "children": [
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Pull up to date translations from Transifex:"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "argument": "bash $",
                      "content": "tx pull --all",
                      "name": "prompt",
                      "options": []
                    },
                    "type": "BlockDirective"
                  }
                ]
              },
              {
                "children": [
                  {
                    "data": {
                      "children": [
                        {
                          "data": {
                            "value": "Commit and push these changes to our repo"
                          },
                          "type": "Words"
                        }
                      ]
                    },
                    "type": "Paragraph"
                  },
                  {
                    "data": {
                      "argument": "bash $",
                      "content": "git add locale/\n   git commit -m \"Update translations\"\n   git push",
                      "name": "prompt",
                      "options": []
                    },
                    "type": "BlockDirective"
                  }
                ]
              }
            ]
          },
          "type": "EnumeratedList"
        },
        {
          "data": {
            "children": [
              {
                "data": {
                  "value": "The last "
                },
                "type": "Words"
              },
              {
                "data": {
                  "value": [
                    "git push"
                  ]
                },
                "type": "Verbatim"
              },
              {
                "data": {
                  "value": " will trigger a build per translation defined as part of your project under Read the Docs and make it immediately available."
                },
                "type": "Words"
              }
            ]
          },
          "type": "Paragraph"
        }
      ],
      "level": 2,
      "title": "Build documentation from up to date translation"
    }
  ],
  "content": {},
  "example_section_data": {
    "children": [],
    "level": 0,
    "title": null
  },
  "item_file": null,
  "item_line": null,
  "item_type": null,
  "ordered_sections": [],
  "references": null,
  "see_also": [],
  "signature": {
    "value": null
  }
}